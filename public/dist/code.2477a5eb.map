{"version":3,"sources":["money.js","get_params.js","code.js"],"names":["decimal","num","isNaN","Math","ceil","cent","params","params_arr","location","search","slice","split","params_obj","forEach","param","arr","key","val","getHash","hash","hash_obj","JSON","parse","decodeURIComponent","Object","keys","e","console","error","log","page","document","getElementById","cli","new_class","className","qr_ele","load","detail","txcurrcd","txamt","self_order","edit","order","data_type","type","innerHTML","setData","res","data","style","display","cny","hkd","rate","get_params","setURL","qrcode","replace","qr","src","axios","get","then","catch"],"mappings":";;;AAiBC,aAjBM,SAASA,EAAQC,GACpBC,OAAAA,MAAMD,GACD,EAELA,GAAO,EACF,EAEDE,KAAKC,KAAW,IAANH,GAAa,IAExB,SAASI,EAAKJ,GACjBC,OAAAA,MAAMD,GACD,EAELA,GAAO,EACF,EAEDE,KAAKC,KAAW,IAANH,GACjB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAAA,QAAA,KAAA;;ACUA,aA3Bc,SAAW,IACrBK,IACAC,EADSC,SAASC,OAAOC,MAAM,GACXC,MAAM,KAC1BC,EAAa,GAOVA,OANPL,EAAWM,QAAQ,SAAAC,GACXC,IAAAA,EAAMD,EAAMH,MAAM,KAClBK,EAAMD,EAAI,GACVE,EAAMF,EAAI,GACdH,EAAWI,GAAOC,IAEfL,EAED,SAASM,IACXC,IAAAA,EAAOX,SAASW,KAAKT,MAAM,GAC3BU,EAAW,KACZD,GAAAA,EACC,IACFC,EAAWC,KAAKC,MAAMC,mBAAmBJ,IACzCK,OAAOC,KAAKL,GAAUP,QAAQ,SAAAG,GAC7BI,EAASJ,GAAOO,mBAAmBH,EAASJ,MAE7C,MAAMU,GACNC,QAAQC,MAAMF,GAITN,OADPO,QAAQE,IAAIT,GACLA,EACP,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAAA,QAAA,QAAA;;AC0CA,aApED,QAAA,eACA,IAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,iBAkEC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAjED,IAAIU,EAAOC,SAASC,eAAe,QAC/BC,EAAMF,SAASC,eAAe,UAC9BE,EAAYJ,EAAKK,UACjBC,EAASL,SAASC,eAAe,MACjCK,EAAON,SAASC,eAAe,QAC/BM,EAASP,SAASC,eAAe,UACjCO,EAAWR,SAASC,eAAe,YACnCQ,EAAQT,SAASC,eAAe,SACnCpB,GAAa,EARd,EAAA,WAUI6B,EAAa,KAEjB,GAAG7B,EAAW8B,KAAK,CACdC,IAAAA,EAAQpB,mBAAmBX,EAAW8B,MACvC,IACFC,EAAQtB,KAAKC,MAAMqB,GACnBF,EAAa,GACbjB,OAAOC,KAAKkB,GAAO9B,QAAQ,SAAAG,GAC1ByB,EAAWzB,GAAOO,mBAAmBoB,EAAM3B,MAE5C,MAAMU,KAER,IAAIkB,EAAY,EAIhB,OAHIH,GAAcA,EAAWI,OAC3BD,EAAYH,EAAWI,MAElB,GAAKD,GACH,IAAA,IACDX,EAAIa,UAAY,MAChB,MACC,IAAA,IACDb,EAAIa,UAAY,KAChB,MACJ,QACIb,EAAIa,UAAY,MAExB,SAASC,EAAQC,GACTC,IAAAA,EAAOD,EAAIC,KACfV,EAASO,UAAYG,EAAKV,SAC1BC,EAAMM,UAAYG,EAAKT,MACvBF,EAAOY,MAAMC,QAAU,QAGxBV,GACFM,EAAQ,CACPE,KAAM,CACLV,SAAU,IACVC,MAAOC,EAAWW,OAKrBX,EAAWY,KAAM,EAAKZ,EAAAA,MAAAA,EAAWW,IAAMX,EAAWa,MAClDb,EAAWW,KAAM,EAAKX,EAAAA,MAAAA,EAAWW,KACjC,IAAIG,EAAa,CACbjD,OAAQmC,GAMZ,SAASe,EAAOR,GACRS,IAAAA,EAAST,EAAIC,KAAKQ,OAAOC,QAAQ,IAAM,KAC7CrB,EAAKa,MAAMC,QAAU,OACrBQ,GAAGC,IAAMH,EANXI,MAAMC,IAAI,wBAAyBP,GAAYQ,KAAKP,GAAQQ,MAAM,SAAAhB,GAC9Da,MAAMC,IAAI,8CAA+CP,GAAYQ,KAAKP","file":"code.2477a5eb.map","sourceRoot":"..\\src","sourcesContent":["export function decimal(num){\r\n\tif(isNaN(num)){\r\n\t\treturn 0\r\n\t}\r\n\tif(num <= 0){\r\n\t\treturn 0\r\n\t}\r\n\treturn Math.ceil(num * 100) / 100\r\n}\r\nexport function cent(num){\r\n\tif(isNaN(num)){\r\n\t\treturn 0\r\n\t}\r\n\tif(num <= 0){\r\n\t\treturn 0\r\n\t}\r\n\treturn Math.ceil(num * 100)\r\n}\r\n","export default function (){\r\n\tlet params = location.search.slice(1)\r\n\tlet params_arr = params.split('&')\r\n\tlet params_obj = {}\r\n\tparams_arr.forEach(param => {\r\n\t    let arr = param.split('=')\r\n\t    let key = arr[0]\r\n\t    let val = arr[1]\r\n\t    params_obj[key] = val\r\n\t})\r\n\treturn params_obj\r\n}\r\nexport function getHash(){\r\n\tlet hash = location.hash.slice(1)\r\n\tlet hash_obj = null\r\n\tif(hash){\r\n\t\ttry{\r\n\t\t\thash_obj = JSON.parse(decodeURIComponent(hash))\r\n\t\t\tObject.keys(hash_obj).forEach(key => {\r\n\t\t\t\thash_obj[key] = decodeURIComponent(hash_obj[key])\r\n\t\t\t})\r\n\t\t}catch(e){\r\n\t\t\tconsole.error(e)\r\n\t\t}\r\n\t}\r\n\tconsole.log(hash_obj)\r\n\treturn hash_obj\r\n}\r\n","// import QRCode from 'qrcode'\r\nimport './code.less'\r\nimport {decimal, cent} from './money.js'\r\nimport getParams from './get_params'\r\nlet page = document.getElementById('page'), \r\n    cli = document.getElementById('client'),\r\n    new_class = page.className,\r\n    qr_ele = document.getElementById('qr'),\r\n    load = document.getElementById('load'),\r\n    detail = document.getElementById('detail'),\r\n    txcurrcd = document.getElementById('txcurrcd'),\r\n    txamt = document.getElementById('txamt'),\r\n\tparams_obj = getParams()\r\n\r\nlet self_order = null\r\n\r\nif(params_obj.edit){\r\n\tlet order = decodeURIComponent(params_obj.edit)\r\n\ttry{\r\n\t\torder = JSON.parse(order)\r\n\t\tself_order = {}\r\n\t\tObject.keys(order).forEach(key => {\r\n\t\t\tself_order[key] = decodeURIComponent(order[key])\r\n\t\t})\r\n\t}catch(e){}\r\n}\r\nlet data_type = 1\r\n if(self_order && self_order.type){\r\n\t data_type = self_order.type\r\n }\r\nswitch('' + data_type){\r\n    case '2':\r\n        cli.innerHTML = '支付宝'\r\n        break\r\n    case '1':\r\n        cli.innerHTML = '微信'\r\n        break\r\n    default:\r\n        cli.innerHTML = '支付宝'\r\n}\r\nfunction setData(res){\r\n    let data = res.data\r\n    txcurrcd.innerHTML = data.txcurrcd\r\n    txamt.innerHTML = data.txamt\r\n    detail.style.display = 'block'\r\n}\r\n\r\nif(self_order){\r\n\tsetData({\r\n\t\tdata: {\r\n\t\t\ttxcurrcd: '￥',\r\n\t\t\ttxamt: self_order.cny\r\n\t\t}\r\n\t})\r\n}\r\n\r\nself_order.hkd = cent(self_order.cny / self_order.rate)\r\nself_order.cny = cent(self_order.cny)\r\nlet get_params = {\r\n    params: self_order\r\n}\r\n\r\naxios.get('/api/v1/pay/hkd/qcode', get_params).then(setURL).catch(res => {\r\n    axios.get('http://qpay.mengant.cn/api/v1/pay/hkd/qcode', get_params).then(setURL)\r\n})\r\nfunction setURL(res){\r\n    let qrcode = res.data.qrcode.replace('\\/', '/')\r\n\t\tload.style.display = 'none'\r\n\t\tqr.src = qrcode\r\n}\r\n"]}