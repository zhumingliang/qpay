{"version":3,"sources":["money.js","get_params.js","code.js"],"names":["decimal","num","isNaN","Math","ceil","cent","params","params_arr","location","search","slice","split","params_obj","forEach","param","arr","key","val","page","document","getElementById","cli","new_class","className","qr_ele","load","detail","txcurrcd","txamt","self_order","edit","order","decodeURIComponent","JSON","parse","e","data_type","type","innerHTML","setData","res","data","style","display","cny","rate","hkd","get_params","setURL","qrcode","replace","qr","src","axios","get","then","catch"],"mappings":";;;AAiBC,aAjBM,SAASA,EAAQC,GACpBC,OAAAA,MAAMD,GACD,EAELA,GAAO,EACF,EAEDE,KAAKC,KAAW,IAANH,GAAa,IAExB,SAASI,EAAKJ,GACjBC,OAAAA,MAAMD,GACD,EAELA,GAAO,EACF,EAEDE,KAAKC,KAAW,IAANH,GACjB,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAAA,QAAA,KAAA;;ACNA,aAXc,SAAW,IACrBK,IACAC,EADSC,SAASC,OAAOC,MAAM,GACXC,MAAM,KAC1BC,EAAa,GAOVA,OANPL,EAAWM,QAAQ,SAAAC,GACXC,IAAAA,EAAMD,EAAMH,MAAM,KAClBK,EAAMD,EAAI,GACVE,EAAMF,EAAI,GACdH,EAAWI,GAAOC,IAEfL,EACP,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA;;ACqDA,aA/DD,QAAA,eACA,IAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,iBA6DC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA5DD,IAAIM,EAAOC,SAASC,eAAe,QAC/BC,EAAMF,SAASC,eAAe,UAC9BE,EAAYJ,EAAKK,UACjBC,EAASL,SAASC,eAAe,MACjCK,EAAON,SAASC,eAAe,QAC/BM,EAASP,SAASC,eAAe,UACjCO,EAAWR,SAASC,eAAe,YACnCQ,EAAQT,SAASC,eAAe,SACnCR,GAAa,EARd,EAAA,WAUIiB,EAAa,KACjB,GAAGjB,EAAWkB,KAAK,CACXC,IAAAA,EAAQC,mBAAmBpB,EAAWkB,MAC1C,IACFD,EAAaI,KAAKC,MAAMH,GACxB,MAAMI,KAGR,IAAIC,EAAY,EAIhB,OAHIP,GAAcA,EAAWQ,OAC3BD,EAAYP,EAAWQ,MAElB,GAAKD,GACH,IAAA,IACDf,EAAIiB,UAAY,MAChB,MACC,IAAA,IACDjB,EAAIiB,UAAY,KAChB,MACJ,QACIjB,EAAIiB,UAAY,MAExB,SAASC,EAAQC,GACTC,IAAAA,EAAOD,EAAIC,KACfd,EAASW,UAAYG,EAAKd,SAC1BC,EAAMU,UAAYG,EAAKb,MACvBF,EAAOgB,MAAMC,QAAU,QAGxBd,GACFU,EAAQ,CACPE,KAAM,CACLd,SAAU,MACVC,OAAO,EAAQC,EAAAA,SAAAA,EAAWe,IAAMf,EAAWgB,SAK9ChB,EAAWiB,KAAM,EAAKjB,EAAAA,MAAAA,EAAWe,IAAMf,EAAWgB,MAClD,IAAIE,EAAa,CACbzC,OAAQuB,GAMZ,SAASmB,EAAOR,GACRS,IAAAA,EAAST,EAAIC,KAAKQ,OAAOC,QAAQ,IAAM,KAC7CzB,EAAKiB,MAAMC,QAAU,OACrBQ,GAAGC,IAAMH,EANXI,MAAMC,IAAI,wBAAyBP,GAAYQ,KAAKP,GAAQQ,MAAM,SAAAhB,GAC9Da,MAAMC,IAAI,8CAA+CP,GAAYQ,KAAKP","file":"code.cb610d37.map","sourceRoot":"..\\src","sourcesContent":["export function decimal(num){\r\n\tif(isNaN(num)){\r\n\t\treturn 0\r\n\t}\r\n\tif(num <= 0){\r\n\t\treturn 0\r\n\t}\r\n\treturn Math.ceil(num * 100) / 100\r\n}\r\nexport function cent(num){\r\n\tif(isNaN(num)){\r\n\t\treturn 0\r\n\t}\r\n\tif(num <= 0){\r\n\t\treturn 0\r\n\t}\r\n\treturn Math.ceil(num * 100)\r\n}\r\n","export default function (){\r\n\tlet params = location.search.slice(1)\r\n\tlet params_arr = params.split('&')\r\n\tlet params_obj = {}\r\n\tparams_arr.forEach(param => {\r\n\t    let arr = param.split('=')\r\n\t    let key = arr[0]\r\n\t    let val = arr[1]\r\n\t    params_obj[key] = val\r\n\t})\r\n\treturn params_obj\r\n}\r\n","// import QRCode from 'qrcode'\r\nimport './code.less'\r\nimport {decimal, cent} from './money.js'\r\nimport getParams from './get_params'\r\nlet page = document.getElementById('page'), \r\n    cli = document.getElementById('client'),\r\n    new_class = page.className,\r\n    qr_ele = document.getElementById('qr'),\r\n    load = document.getElementById('load'),\r\n    detail = document.getElementById('detail'),\r\n    txcurrcd = document.getElementById('txcurrcd'),\r\n    txamt = document.getElementById('txamt'),\r\n\tparams_obj = getParams()\r\n\r\nlet self_order = null\r\nif(params_obj.edit){\r\n    let order = decodeURIComponent(params_obj.edit)\r\n\ttry{\r\n\t\tself_order = JSON.parse(order)\r\n\t}catch(e){}\r\n\t\r\n}\r\nlet data_type = 1\r\n if(self_order && self_order.type){\r\n\t data_type = self_order.type\r\n }\r\nswitch('' + data_type){\r\n    case '2':\r\n        cli.innerHTML = '支付宝'\r\n        break\r\n    case '1':\r\n        cli.innerHTML = '微信'\r\n        break\r\n    default:\r\n        cli.innerHTML = '支付宝'\r\n}\r\nfunction setData(res){\r\n    let data = res.data\r\n    txcurrcd.innerHTML = data.txcurrcd\r\n    txamt.innerHTML = data.txamt\r\n    detail.style.display = 'block'\r\n}\r\n\r\nif(self_order){\r\n\tsetData({\r\n\t\tdata: {\r\n\t\t\ttxcurrcd: 'HKD',\r\n\t\t\ttxamt: decimal(self_order.cny / self_order.rate)\r\n\t\t}\r\n\t})\r\n}\r\n\r\nself_order.hkd = cent(self_order.cny / self_order.rate)\r\nlet get_params = {\r\n    params: self_order\r\n}\r\n\r\naxios.get('/api/v1/pay/hkd/qcode', get_params).then(setURL).catch(res => {\r\n    axios.get('http://qpay.mengant.cn/api/v1/pay/hkd/qcode', get_params).then(setURL)\r\n})\r\nfunction setURL(res){\r\n    let qrcode = res.data.qrcode.replace('\\/', '/')\r\n\t\tload.style.display = 'none'\r\n\t\tqr.src = qrcode\r\n}\r\n"]}