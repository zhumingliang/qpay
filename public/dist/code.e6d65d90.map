{"version":3,"sources":["code.js"],"names":["page","document","getElementById","cli","new_class","className","qr_ele","load","detail","txcurrcd","txamt","params","location","search","slice","params_arr","split","params_obj","forEach","param","arr","key","val","data_type","p1","p2","decodeURIComponent","e","type","innerHTML","setData","res","data","style","display","axios","get","then","catch","get_params","setURL","qrcode","replace","qr","src"],"mappings":";;;AAsEC,aArED,QAAA,eAEA,IAAIA,EAAOC,SAASC,eAAe,QAC/BC,EAAMF,SAASC,eAAe,UAC9BE,EAAYJ,EAAKK,UACjBC,EAASL,SAASC,eAAe,MACjCK,EAAON,SAASC,eAAe,QAC/BM,EAASP,SAASC,eAAe,UACjCO,EAAWR,SAASC,eAAe,YACnCQ,EAAQT,SAASC,eAAe,SAChCS,EAASC,SAASC,OAAOC,MAAM,GAC/BC,EAAaJ,EAAOK,MAAM,KAC1BC,EAAa,GACjBF,EAAWG,QAAQ,SAAAC,GACXC,IAAAA,EAAMD,EAAMH,MAAM,KAClBK,EAAMD,EAAI,GACVE,EAAMF,EAAI,GACdH,EAAWI,GAAOC,IAEtB,IAAIC,EAAY,GAChB,GAAGN,EAAWO,IAAMP,EAAWQ,GAAG,CAC9BF,EAAYN,EAAWO,GAAKP,EAAWQ,GACpC,IACCF,EAAYG,mBAAmBH,GAClC,MAAMI,GACHJ,EAAY,IAGpB,IAAIK,EAAO,SACX,OAAOL,GACE,IAAA,QACDK,EAAO,SACPzB,EAAI0B,UAAY,MAChB,MACC,IAAA,OACDD,EAAO,SACPzB,EAAI0B,UAAY,KAChB,MACJ,QACID,EAAO,SACPzB,EAAI0B,UAAY,MAExB,SAASC,EAAQC,GACTC,IAAAA,EAAOD,EAAIC,KACfvB,EAASoB,UAAYG,EAAKvB,SAC1BC,EAAMmB,UAAYG,EAAKtB,MACvBF,EAAOyB,MAAMC,QAAU,QAE3BC,MAAMC,IAAI,sBACLC,KAAKP,GAASQ,MAAM,SAAAP,GACjBI,MAAMC,IAAI,4CAA4CC,KAAKP,KAEnE,IAAIS,EAAa,CACb5B,OAAQ,CACJiB,KAAMA,IAMd,SAASY,EAAOT,GACRU,IAAAA,EAASV,EAAIC,KAAKS,OAAOC,QAAQ,IAAM,KAC7CnC,EAAK0B,MAAMC,QAAU,OACrBS,GAAGC,IAAMH,EANXN,MAAMC,IAAI,oBAAqBG,GAAYF,KAAKG,GAAQF,MAAM,SAAAP,GAC1DI,MAAMC,IAAI,0CAA2CG,GAAYF,KAAKG","file":"code.e6d65d90.map","sourceRoot":"..\\src","sourcesContent":["// import QRCode from 'qrcode'\r\nimport './code.less'\r\n\r\nlet page = document.getElementById('page'), \r\n    cli = document.getElementById('client'),\r\n    new_class = page.className,\r\n    qr_ele = document.getElementById('qr'),\r\n    load = document.getElementById('load'),\r\n    detail = document.getElementById('detail'),\r\n    txcurrcd = document.getElementById('txcurrcd'),\r\n    txamt = document.getElementById('txamt')\r\nlet params = location.search.slice(1)\r\nlet params_arr = params.split('&')\r\nlet params_obj = {}\r\nparams_arr.forEach(param => {\r\n    let arr = param.split('=')\r\n    let key = arr[0]\r\n    let val = arr[1]\r\n    params_obj[key] = val\r\n})\r\nlet data_type = ''\r\nif(params_obj.p1 && params_obj.p2){\r\n    data_type = params_obj.p1 + params_obj.p2\r\n    try{\r\n        data_type = decodeURIComponent(data_type)\r\n    }catch(e){\r\n        data_type = ''\r\n    }\r\n}\r\nlet type = '800101' //默认支付宝支付\r\nswitch(data_type){\r\n    case '支付宝支付':\r\n        type = '800101'\r\n        cli.innerHTML = '支付宝'\r\n        break\r\n    case '微信支付':\r\n        type = '800201'\r\n        cli.innerHTML = '微信'\r\n        break\r\n    default:\r\n        type = '800101'\r\n        cli.innerHTML = '支付宝'\r\n}\r\nfunction setData(res){\r\n    let data = res.data\r\n    txcurrcd.innerHTML = data.txcurrcd\r\n    txamt.innerHTML = data.txamt\r\n    detail.style.display = 'block'\r\n}\r\naxios.get('/api/v1/order/info')\r\n    .then(setData).catch(res => {\r\n        axios.get('http://qpay.mengant.cn/api/v1/order/info').then(setData)\r\n    })\r\nlet get_params = {\r\n    params: {\r\n        type: type\r\n    }\r\n}\r\naxios.get('/api/v1/pay/qcode', get_params).then(setURL).catch(res => {\r\n    axios.get('http://qpay.mengant.cn/api/v1/pay/qcode', get_params).then(setURL)\r\n})\r\nfunction setURL(res){\r\n    let qrcode = res.data.qrcode.replace('\\/', '/')\r\n\t\tload.style.display = 'none'\r\n\t\tqr.src = qrcode\r\n//     QRCode.toDataURL(qrcode)\r\n//       .then(url => {\r\n//         load.style.display = 'none'\r\n//         qr.src = url\r\n//       })\r\n}\r\n"]}